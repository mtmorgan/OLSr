<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="cache_directory() returns the on-disk location of
the cache used by OLSr.
cache_info() summarizes information about each file
in the cache.
cache() returns an object that can be used in cache
management."><title>OLSr Cache Management — cache_directory • OLSr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="OLSr Cache Management — cache_directory"><meta property="og:description" content="cache_directory() returns the on-disk location of
the cache used by OLSr.
cache_info() summarizes information about each file
in the cache.
cache() returns an object that can be used in cache
management."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">OLSr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/case_study_cxg.html">2. Case Study: CELLxGENE Ontologies</a>
    <a class="dropdown-item" href="../articles/introduction.html">1. Introduction to OLSr</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mtmorgan/OLSr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>OLSr Cache Management</h1>
      <small class="dont-index">Source: <a href="https://github.com/mtmorgan/OLSr/blob/HEAD/R/cache.R" class="external-link"><code>R/cache.R</code></a></small>
      <div class="d-none name"><code>cache.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>cache_directory()</code> returns the on-disk location of
the cache used by OLSr.</p>
<p><code>cache_info()</code> summarizes information about each file
in the cache.</p>
<p><code>cache()</code> returns an object that can be used in cache
management.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cache_directory</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cache_info</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cache</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>cache_directory() returns the character(1) path to the
location of the cache on disk.</p>


<p><code>cache_info()</code> returns a tibble with columns summarizing</p><ul><li><p><code>file</code>: the file name of the cache entry. This is a hash, based
on the function and signature, of the cached object. It is not
easily possible to associate individual calls in <em>R</em> to file
names.</p></li>
<li><p><code>size</code> the size in bytes of the cached object.</p></li>
<li><p><code>mtime</code>, <code>ctime</code>, <code>atime</code>: the modification, creation and
last-access time of the file.</p></li>
</ul><p><code>cache()</code> returns an object defined in the cachem package.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>OLSr uses an on-disk cache to improve performance and reliability.
Each query to the OLS server is cached on first use, so that
subsequent responses can be read from the local disk. This greatly
increases performance, and allows use of previously retrieved
resources when off-line.</p>
<p>A risk of using a cache is that the cache contains an 'old' version
of the response. Circumvent this risk by manually manipulating the
cache, e.g., removing objects that a known to be too old.</p>
<p>OLSr uses the memoise <a href="https://CRAN.R-project.org/package=memoise" class="external-link">https://CRAN.R-project.org/package=memoise</a>
and cachem <a href="https://CRAN.R-project.org/package=cachem" class="external-link">https://CRAN.R-project.org/package=cachem</a> packages to
implement the cache. The disk cache is implemented using cachem's
<code>cache_disk()</code> function using the default cache size (1 Gb) and
<code>"lsu"</code> ('least recently used') eviction policy. Objects remain in
the cache for 30 days.</p>
<p>The cache is created in a package-specific directory, located at
<code>cache_directory()</code>.</p>
<p>See the help page <code>?cache_disk</code> for information on using the object
returned by <code>cache()</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">cache_directory</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/home/runner/.cache/R/OLSr"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">cache_info</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 0 × 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 11 variables: file &lt;chr&gt;, size &lt;dbl&gt;, isdir &lt;lgl&gt;, mode &lt;octmode&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   mtime &lt;dttm&gt;, ctime &lt;dttm&gt;, atime &lt;dttm&gt;, uid &lt;int&gt;, gid &lt;int&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   uname &lt;chr&gt;, grname &lt;chr&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## cache objects created in the last 24 hours</span></span></span>
<span class="r-in"><span><span class="fu">cache_info</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">mtime</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">24</span> <span class="op">*</span> <span class="fl">60</span> <span class="op">*</span> <span class="fl">60</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 0 × 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 11 variables: file &lt;chr&gt;, size &lt;dbl&gt;, isdir &lt;lgl&gt;, mode &lt;octmode&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   mtime &lt;dttm&gt;, ctime &lt;dttm&gt;, atime &lt;dttm&gt;, uid &lt;int&gt;, gid &lt;int&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   uname &lt;chr&gt;, grname &lt;chr&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">## remove the most recently modified object, forcing this to be recreated</span></span></span>
<span class="r-in"><span><span class="va">file_name</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>    <span class="fu">cache_info</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">mtime</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu">cache_directory</span><span class="op">(</span><span class="op">)</span>, <span class="va">file_name</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">cache</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;cache_disk&gt; &lt;cachem&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Methods:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     get(key, missing = missing_)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     set(key, value)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     exists(key)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     keys()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     remove(key)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     reset()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     prune()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     size()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     destroy()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     is_destroyed(throw = FALSE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     info()</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Martin Morgan, Chan Zuckerberg Initiative DAF CZF2019-002443, NIH NCI ITCR U24CA180996.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

